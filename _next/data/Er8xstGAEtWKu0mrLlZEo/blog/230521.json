{"pageProps":{"post":{"title":"맘에 쏙 드는 네비게이션바 만들기..(1)","date":"2023-05-21","description":"간단한 정리글","body":{"raw":"\n> 모든 움직임을 framer-motion으로 해결할 필요는 없었다...\n\n이 블로그를 반응형으로 만들고 싶은데 브레이크포인트마다 뚝뚝 끊기는 게 싫어서 일단 헤더의 navbar부터 수정을 시작했다.\n\n지금 하는 사이드 프로젝트에서 framer를 사용해 디자인 시스템을 작업하고, 아마도 애니메이션은 framer-motion을 사용할 것 같아서 헤더에도 framer-motion을 적용해볼까 했다.\n\n화면 크기에 따라 다른 애니메이션을 적용해야 한다는 생각에 구글에 framer-motion media query를 검색하고 useMediaQuery라는 훅을 베껴왔다.([이 블로그](https://samuelkraft.com/blog/responsive-animation-framer-motion)에서..)\n\n```\nimport { useEffect, useState } from 'react';\n\nconst useMediaQuery = ({ query }: { query: string }) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n\n    const listener = () => {\n      setMatches(media.matches);\n    };\n\n    if (typeof media.addEventListener === 'function') {\n      media.addEventListener('change', listener);\n    } else {\n      media.addListener(listener);\n    }\n\n    return () => {\n      if (typeof media.removeEventListener === 'function') {\n        media.removeEventListener('change', listener);\n      } else {\n        media.removeListener(listener);\n      }\n    };\n  }, [matches, query]);\n\n  return matches;\n};\n\nexport default useMediaQuery;\n\n```\n\n그리고 이런 훅도 만들었다.\n\n```\nimport useMediaQuery from './useMediaQuery';\n\nconst useIsMobile = () => useMediaQuery({ query: '(max-width: 640px)' });\n\nexport default useIsMobile;\n```\n\n화면 상단 네비게이션 바의 왼쪽, 내 닉네임이 있는 부분(이하, 홈버튼)가 640px를 기준으로 그것보다 작으면 닉네임 왼쪽 공간이 좁고, 크면 왼쪽 공간도 넓기를 바랐다.\n그래서 대략 이런 식으로 코드를 작성했다.\n\n```\nconst isMobile = useIsMobile();\n\n...\nreturn (\n    <motion.header\n      Layout\n      layoutRoot\n      initial={false}\n      animate={isMobile ? \"mobile\" : \"desktop\"}\n      className=\"sticky top-0 left-0 w-full bg-white opacity-80\"\n    >\n      <nav className=\"w-full grid grid-cols-3 items-center relative h-16 px-2\">\n        <motion.div\n          variants={{ mobile: { x: 0 }, desktop: { x: 5 } }}\n          transition={ ease: \"easeOut\", duration: 0.3 }\n        >\n          <Link\n            href=\"/\"\n            className=\"font-extralight text-xl\"\n          >\n            hyongti\n          </Link>\n      </motion.nav>\n    </motion.header>\n  );\n...\n```\n\n그런데... 새로고침을 할 때마다 홈버튼이 움직였다.\n모바일이면 모바일 위치에서, 데스크톱이면 데스크톱 위치에서 안 움직이길 바랐는데,\nuseMediaQuery 훅이 컴포넌트가 마운트 된 후에 useEffect 내부에서 window.matchMedia를 통해 현재 스크린 사이즈를 비교해 state 값을 바꿔주기 때문이었다..\n\n모바일 사이즈든 데스크톱 사이즈든 새로고침 했을 때에는 애니메이션이 없이 홈버튼이 원하는 위치에 있었음 했는데, useMediaQuery는 그냥 베껴왔고, framer-motion은 처음 써보고..\n그래서 내가 애니메이션 설정을 잘못해줬나.. 생각하면서 css로만 해결할 수 있는 걸 오래 삽질했다..\n\n```\n...\nreturn (\n    <header className=\"sticky top-0 left-0 w-full bg-white opacity-80\">\n      <nav className=\"w-full grid grid-cols-3 items-center relative h-16 px-2\">\n        <Link\n          href=\"/\"\n          className=\"font-extralight text-xl translate-x-0 transition-transform sm:translate-x-6 duration-300\"\n        >\n          hyongti\n        </Link>\n        ...\n      </nav>\n    </header>\n  );\n...\n```\n","code":"var Component=(()=>{var m=Object.create;var a=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var i in e)a(t,i,{get:e[i],enumerable:!0})},o=(t,e,i,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of h(e))!p.call(t,r)&&r!==i&&a(t,r,{get:()=>e[r],enumerable:!(s=u(e,r))||s.enumerable});return t};var M=(t,e,i)=>(i=t!=null?m(f(t)):{},o(e||!t||!t.__esModule?a(i,\"default\",{value:t,enumerable:!0}):i,t)),g=t=>o(a({},\"__esModule\",{value:!0}),t);var d=x((q,c)=>{c.exports=_jsx_runtime});var k={};y(k,{default:()=>w,frontmatter:()=>v});var n=M(d()),v={title:\"\\uB9D8\\uC5D0 \\uC3D9 \\uB4DC\\uB294 \\uB124\\uBE44\\uAC8C\\uC774\\uC158\\uBC14 \\uB9CC\\uB4E4\\uAE30..(1)\",date:new Date(16846272e5),description:\"\\uAC04\\uB2E8\\uD55C \\uC815\\uB9AC\\uAE00\"};function l(t){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",a:\"a\",pre:\"pre\",code:\"code\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"\\uBAA8\\uB4E0 \\uC6C0\\uC9C1\\uC784\\uC744 framer-motion\\uC73C\\uB85C \\uD574\\uACB0\\uD560 \\uD544\\uC694\\uB294 \\uC5C6\\uC5C8\\uB2E4...\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"\\uC774 \\uBE14\\uB85C\\uADF8\\uB97C \\uBC18\\uC751\\uD615\\uC73C\\uB85C \\uB9CC\\uB4E4\\uACE0 \\uC2F6\\uC740\\uB370 \\uBE0C\\uB808\\uC774\\uD06C\\uD3EC\\uC778\\uD2B8\\uB9C8\\uB2E4 \\uB69D\\uB69D \\uB04A\\uAE30\\uB294 \\uAC8C \\uC2EB\\uC5B4\\uC11C \\uC77C\\uB2E8 \\uD5E4\\uB354\\uC758 navbar\\uBD80\\uD130 \\uC218\\uC815\\uC744 \\uC2DC\\uC791\\uD588\\uB2E4.\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\uC9C0\\uAE08 \\uD558\\uB294 \\uC0AC\\uC774\\uB4DC \\uD504\\uB85C\\uC81D\\uD2B8\\uC5D0\\uC11C framer\\uB97C \\uC0AC\\uC6A9\\uD574 \\uB514\\uC790\\uC778 \\uC2DC\\uC2A4\\uD15C\\uC744 \\uC791\\uC5C5\\uD558\\uACE0, \\uC544\\uB9C8\\uB3C4 \\uC560\\uB2C8\\uBA54\\uC774\\uC158\\uC740 framer-motion\\uC744 \\uC0AC\\uC6A9\\uD560 \\uAC83 \\uAC19\\uC544\\uC11C \\uD5E4\\uB354\\uC5D0\\uB3C4 framer-motion\\uC744 \\uC801\\uC6A9\\uD574\\uBCFC\\uAE4C \\uD588\\uB2E4.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\uD654\\uBA74 \\uD06C\\uAE30\\uC5D0 \\uB530\\uB77C \\uB2E4\\uB978 \\uC560\\uB2C8\\uBA54\\uC774\\uC158\\uC744 \\uC801\\uC6A9\\uD574\\uC57C \\uD55C\\uB2E4\\uB294 \\uC0DD\\uAC01\\uC5D0 \\uAD6C\\uAE00\\uC5D0 framer-motion media query\\uB97C \\uAC80\\uC0C9\\uD558\\uACE0 useMediaQuery\\uB77C\\uB294 \\uD6C5\\uC744 \\uBCA0\\uAEF4\\uC654\\uB2E4.(\",(0,n.jsx)(e.a,{href:\"https://samuelkraft.com/blog/responsive-animation-framer-motion\",children:\"\\uC774 \\uBE14\\uB85C\\uADF8\"}),\"\\uC5D0\\uC11C..)\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`import { useEffect, useState } from 'react';\n\nconst useMediaQuery = ({ query }: { query: string }) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n\n    const listener = () => {\n      setMatches(media.matches);\n    };\n\n    if (typeof media.addEventListener === 'function') {\n      media.addEventListener('change', listener);\n    } else {\n      media.addListener(listener);\n    }\n\n    return () => {\n      if (typeof media.removeEventListener === 'function') {\n        media.removeEventListener('change', listener);\n      } else {\n        media.removeListener(listener);\n      }\n    };\n  }, [matches, query]);\n\n  return matches;\n};\n\nexport default useMediaQuery;\n\n`})}),`\n`,(0,n.jsx)(e.p,{children:\"\\uADF8\\uB9AC\\uACE0 \\uC774\\uB7F0 \\uD6C5\\uB3C4 \\uB9CC\\uB4E4\\uC5C8\\uB2E4.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`import useMediaQuery from './useMediaQuery';\n\nconst useIsMobile = () => useMediaQuery({ query: '(max-width: 640px)' });\n\nexport default useIsMobile;\n`})}),`\n`,(0,n.jsx)(e.p,{children:`\\uD654\\uBA74 \\uC0C1\\uB2E8 \\uB124\\uBE44\\uAC8C\\uC774\\uC158 \\uBC14\\uC758 \\uC67C\\uCABD, \\uB0B4 \\uB2C9\\uB124\\uC784\\uC774 \\uC788\\uB294 \\uBD80\\uBD84(\\uC774\\uD558, \\uD648\\uBC84\\uD2BC)\\uAC00 640px\\uB97C \\uAE30\\uC900\\uC73C\\uB85C \\uADF8\\uAC83\\uBCF4\\uB2E4 \\uC791\\uC73C\\uBA74 \\uB2C9\\uB124\\uC784 \\uC67C\\uCABD \\uACF5\\uAC04\\uC774 \\uC881\\uACE0, \\uD06C\\uBA74 \\uC67C\\uCABD \\uACF5\\uAC04\\uB3C4 \\uB113\\uAE30\\uB97C \\uBC14\\uB790\\uB2E4.\n\\uADF8\\uB798\\uC11C \\uB300\\uB7B5 \\uC774\\uB7F0 \\uC2DD\\uC73C\\uB85C \\uCF54\\uB4DC\\uB97C \\uC791\\uC131\\uD588\\uB2E4.`}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`const isMobile = useIsMobile();\n\n...\nreturn (\n    <motion.header\n      Layout\n      layoutRoot\n      initial={false}\n      animate={isMobile ? \"mobile\" : \"desktop\"}\n      className=\"sticky top-0 left-0 w-full bg-white opacity-80\"\n    >\n      <nav className=\"w-full grid grid-cols-3 items-center relative h-16 px-2\">\n        <motion.div\n          variants={{ mobile: { x: 0 }, desktop: { x: 5 } }}\n          transition={ ease: \"easeOut\", duration: 0.3 }\n        >\n          <Link\n            href=\"/\"\n            className=\"font-extralight text-xl\"\n          >\n            hyongti\n          </Link>\n      </motion.nav>\n    </motion.header>\n  );\n...\n`})}),`\n`,(0,n.jsx)(e.p,{children:`\\uADF8\\uB7F0\\uB370... \\uC0C8\\uB85C\\uACE0\\uCE68\\uC744 \\uD560 \\uB54C\\uB9C8\\uB2E4 \\uD648\\uBC84\\uD2BC\\uC774 \\uC6C0\\uC9C1\\uC600\\uB2E4.\n\\uBAA8\\uBC14\\uC77C\\uC774\\uBA74 \\uBAA8\\uBC14\\uC77C \\uC704\\uCE58\\uC5D0\\uC11C, \\uB370\\uC2A4\\uD06C\\uD1B1\\uC774\\uBA74 \\uB370\\uC2A4\\uD06C\\uD1B1 \\uC704\\uCE58\\uC5D0\\uC11C \\uC548 \\uC6C0\\uC9C1\\uC774\\uAE38 \\uBC14\\uB790\\uB294\\uB370,\nuseMediaQuery \\uD6C5\\uC774 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uAC00 \\uB9C8\\uC6B4\\uD2B8 \\uB41C \\uD6C4\\uC5D0 useEffect \\uB0B4\\uBD80\\uC5D0\\uC11C window.matchMedia\\uB97C \\uD1B5\\uD574 \\uD604\\uC7AC \\uC2A4\\uD06C\\uB9B0 \\uC0AC\\uC774\\uC988\\uB97C \\uBE44\\uAD50\\uD574 state \\uAC12\\uC744 \\uBC14\\uAFD4\\uC8FC\\uAE30 \\uB54C\\uBB38\\uC774\\uC5C8\\uB2E4..`}),`\n`,(0,n.jsx)(e.p,{children:`\\uBAA8\\uBC14\\uC77C \\uC0AC\\uC774\\uC988\\uB4E0 \\uB370\\uC2A4\\uD06C\\uD1B1 \\uC0AC\\uC774\\uC988\\uB4E0 \\uC0C8\\uB85C\\uACE0\\uCE68 \\uD588\\uC744 \\uB54C\\uC5D0\\uB294 \\uC560\\uB2C8\\uBA54\\uC774\\uC158\\uC774 \\uC5C6\\uC774 \\uD648\\uBC84\\uD2BC\\uC774 \\uC6D0\\uD558\\uB294 \\uC704\\uCE58\\uC5D0 \\uC788\\uC5C8\\uC74C \\uD588\\uB294\\uB370, useMediaQuery\\uB294 \\uADF8\\uB0E5 \\uBCA0\\uAEF4\\uC654\\uACE0, framer-motion\\uC740 \\uCC98\\uC74C \\uC368\\uBCF4\\uACE0..\n\\uADF8\\uB798\\uC11C \\uB0B4\\uAC00 \\uC560\\uB2C8\\uBA54\\uC774\\uC158 \\uC124\\uC815\\uC744 \\uC798\\uBABB\\uD574\\uC92C\\uB098.. \\uC0DD\\uAC01\\uD558\\uBA74\\uC11C css\\uB85C\\uB9CC \\uD574\\uACB0\\uD560 \\uC218 \\uC788\\uB294 \\uAC78 \\uC624\\uB798 \\uC0BD\\uC9C8\\uD588\\uB2E4..`}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:`...\nreturn (\n    <header className=\"sticky top-0 left-0 w-full bg-white opacity-80\">\n      <nav className=\"w-full grid grid-cols-3 items-center relative h-16 px-2\">\n        <Link\n          href=\"/\"\n          className=\"font-extralight text-xl translate-x-0 transition-transform sm:translate-x-6 duration-300\"\n        >\n          hyongti\n        </Link>\n        ...\n      </nav>\n    </header>\n  );\n...\n`})})]})}function b(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(l,t)})):l(t)}var w=b;return g(k);})();\n;return Component;"},"_id":"230521.mdx","_raw":{"sourceFilePath":"230521.mdx","sourceFileName":"230521.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"230521"},"type":"Post"}},"__N_SSG":true}